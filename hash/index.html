<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>암호화 알고리즘: 솔팅과 Work Factor</title>
  <link rel="stylesheet" href="./src/style.css" />

  <!-- fullPage.js v3 CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.css" />

  <!-- 커스텀 CSS -->
  <style>
    body {
      font-family: Arial, sans-serif;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    .section {
      text-align: center;
      padding: 50px;
      font-size: 1.2rem;
    }
    #section1 { background-color: oklch(0.90 0.19 135); }
    #section2 { background-color: oklch(0.80 0.19 135); }
    #section3 { background-color: oklch(0.70 0.19 135); }
    #section4 { background-color: oklch(0.60 0.19 135); }

    h1, h2 {
      margin-bottom: 30px;
    }

    .code {
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 8px;
      display: inline-block;
      text-align: left;
      font-size: 1rem;
      margin-top: 20px;
    }
  </style>

  <!-- MathJax -->
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

  <div id="rainbow-table-explain" style="display: none;">
    <p>해시함수는 복호화 할 수 없기 때문에, 레인보우 테이블에 미리 계산된 해시 값들을 저장하여 공격자가 빠르게 비밀번호를 찾을 수 있도록 돕는다.</p>
  </div>

  <div id="fullpage">
    <!-- 1번 섹션: 소개 -->
    <div class="section" id="section1">
      <h1>암호화 알고리즘에서의 솔팅(salting)과 Work Factor</h1>
    </div>

    <!-- 2번 섹션: 솔팅(Salting) -->
    <div class="section" id="section2">
      <h2>솔팅 (Salting)</h2>
      <p>솔팅은 비밀번호 해시에서 동일한 비밀번호라도 다른 해시 값을 만들도록 <strong>무작위 데이터를 추가</strong>하는 방법입니다.</p>
      <p>예시:</p>
      <div class="code">
        Password: "123456"<br>
        Salt: "a1b2c3"<br>
        Hash("123456" + "a1b2c3") = "f5d1278e8109edd94e1e4197e04873b9"
      </div>
      <p>이렇게 하면 동일한 비밀번호라도 해시 값이 달라져 <strong>무차별 공격과 <span id="rainbow-table">레인보우 테이블</span>공격</strong>을 방지할 수 있습니다.</p>
      <p>일반적으로 16~32바이트(128~256비트)의 랜덤값을 사용한다.</p>
    </div>
    <!-- 3번 섹션: Work Factor -->
    <div class="section" id="section3">
      <h2>Work Factor</h2>
      <p>Work Factor는 해시 계산 비용을 조정하는 파라미터입니다. 반복 횟수를 늘리면 계산이 느려져 공격자가 공격하기 어려워집니다.</p>
      <p>예시 (bcrypt):</p>
      <div class="code">
        bcrypt("password123", saltRounds=12)
      </div>
      <p>수식으로 표현하면 반복 횟수 \( n \)에 따라 해시 계산 시간 \( T \)는 대략</p>
      <p>$$ T \propto 2^n $$</p>
      <p>즉, 반복 횟수가 증가하면 해시 계산이 지수적으로 느려집니다.</p>
    </div>
    <!--시각화-->
    <div class="section" id="section-figure">
      <h2>Work Factor 시각화</h2>
      <canvas id="hashChart" width="600" height="400"></canvas>
      
       <label class="switch">
        <input type="checkbox" id="toggleCheckbox">
        <span class="slider"></span>
      </label>
      <span>Polling</span>
    </div>
    <!-- 4번 섹션: 결론 -->
    <div class="section" id="section4">
      <h2>결론</h2>
      <p>솔팅과 Work Factor를 적용하면 비밀번호 해시는 안전하게 보호됩니다.</p>
      <p>동일한 비밀번호라도 서로 다른 해시가 생성되고, 공격자가 공격을 시도하기 어려워집니다.</p>
    </div>
  </div>

<!-- fullPage.js v3 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.js"></script>
<script type="module">
  document.addEventListener('DOMContentLoaded', function() {
    new fullpage('#fullpage', {
      licenseKey: 'GPLv3', // 무료 학습/테스트용 키
      autoScrolling: true,
      navigation: true,
      navigationPosition: 'right',
      scrollingSpeed: 700,
      afterRender: () => {
        initHandlers();
      }
    });
  });

  import { fetchData } from './src/main.js';

  let pollingInterval;
  let isPolling = false;
  function initHandlers(){
    const toggleButton = document.getElementById("toggleButton");
    
    const toggleCheckbox = document.getElementById("toggleCheckbox");

    toggleCheckbox.addEventListener("change", () => {
      const isPolling = toggleCheckbox.checked;
      if (isPolling) {
        pollingInterval = setInterval(fetchData, 1000);
      } else {
        clearInterval(pollingInterval);
      }
    });

    const rainbowTable = document.getElementById("rainbow-table");
    const explain = document.getElementById("rainbow-table-explain");
    
    rainbowTable.addEventListener("mouseover", (e) => {
      explain.style.display = "block";
      explain.style.left = `${e.clientX + 10}px`;
      explain.style.top = `${e.clientY + 10}px`;
    });

    rainbowTable.addEventListener("mousemove", (e) => {
      explain.style.left = `${e.clientX + 10}px`;
      explain.style.top = `${e.clientY + 10}px`;
    });

    rainbowTable.addEventListener("mouseout", () => {
      explain.style.display = "none";
    });
  }
</script>

</body>
</html>
